import os
from pathlib import Path
from typing import Optional

BASE_DIR = Path(__file__).parent.parent.absolute()


class AppConfig():
    """统一应用配置"""

    # 音频配置
    SAMPLE_RATE: int = 16000
    CHANNELS: int = 1
    DEVICE: int = 3
    VAD_CHUNK_SIZE: int = 200
    SILENCE_THRESHOLD: int = 0.1

    # 模型路径
    ASR_MODEL_PATH: str = (
            BASE_DIR / 'data/models/asr/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404'
                       '-pytorch')
    PUNC_MODEL_PATH: str = (BASE_DIR / 'data/models/punc/punc_ct-transformer_cn-en-common-vocab471067-large')
    EMBEDDING_MODEL_PATH = (BASE_DIR / 'data/models/embedding/bge-small-zh-v1.5')

    # Qdrant配置
    QDRANT_HOST: str = "localhost"
    QDRANT_PORT: int = 6333
    QDRANT_COLLECTION: str = "asr"

    # 处理参数
    BATCH_SIZE: int = 20
    QUEUE_MAXSIZE: int = 500

    # 日志配置
    LOG_LEVEL: str = "INFO"
    LOG_FILE: Optional[str] = None

    class Config:
        env_file = ".env"
        env_prefix = "STUDY_AGENT_"

    HOTWORDS_DICT = {
        "电磁学": [
            "电磁学", "电磁场", "电磁感应", "电场", "磁场", "电势", "电位差", "电荷", "电流", "电压",
            "库仑定律", "高斯定律", "安培定律", "法拉第电磁感应定律", "麦克斯韦方程组", "毕奥萨伐尔定律",
            "欧姆定律", "基尔霍夫定律", "电势能", "电通量", "电场强度", "磁感应强度", "磁通量",
            "电偶极子", "磁偶极子", "电介质", "介电常数", "磁导率", "导体", "绝缘体", "超导体",
            "电极化", "磁化", "位移电流", "坡印廷矢量", "能量密度", "电磁波", "电磁辐射", "平面波",
            "反射", "折射", "衍射", "干涉", "极化", "波阻抗", "驻波", "传播速度", "群速度", "相速度",
            "传输线", "同轴线", "波导", "天线", "微波", "红外", "可见光", "紫外", "X射线", "γ射线",
            "电容", "电感", "电阻", "阻抗", "电抗", "谐振电路", "交流电", "直流电", "电功率", "焦耳定律",
            "自感", "互感", "感抗", "变压器", "电动机", "发电机", "霍尔效应", "磁滞回线", "磁共振", "磁通守恒",
            "右手定则", "左手定则", "安培力", "洛伦兹力", "感应电动势", "楞次定律", "磁场能量", "电场能量",
            "高斯面", "边界条件", "镜像法", "势函数", "散度", "旋度", "梯度", "拉普拉斯方程", "泊松方程",
            "斯托克斯定理",
            "电磁能量守恒", "电磁动量", "电磁应力张量", "坡印廷定理", "连续性方程", "矢量势", "标量势",
            "保守场", "非保守场", "散度定理", "旋度场", "积分定理", "麦克斯韦修正", "电磁波方程", "传播介质",
            "边界反射",
            "感应加热", "无线充电", "磁悬浮", "电磁兼容", "电磁屏蔽", "雷达", "射频", "无线通信", "天线增益", "S参数",
            "电磁谱", "特斯拉", "法拉", "亨利", "欧姆", "伏特", "安培", "库仑", "电通量密度", "磁通量密度",
            "坡印廷矢量方向", "能流密度", "相位差", "介质损耗", "吸收系数", "反射系数", "透射系数",
            "驻波比", "阻抗匹配", "反射损耗", "电磁波传播常数", "波阻抗", "相位常数", "衰减常数",
            "导波模式", "TE波", "TM波", "TEM波", "平面电磁波", "瞬态过程", "RLC电路", "RC电路", "RL电路",
            "电容器", "电感线圈", "电阻元件", "能量存储", "电势差", "磁矢势", "电位移矢量",
            "静电平衡", "等势面", "镜像电荷", "电介质极化", "磁介质磁化", "电磁场叠加原理",
            "电磁干扰", "电磁兼容性", "屏蔽效能", "地线", "电流回路", "电磁耦合", "辐射场", "近场", "远场"
        ],
        "信号": ["信号与系统", "傅里叶变换", "卷积", "采样定理", "拉普拉斯变换", "冲激响应"],
        "热力学": ["热力学", "热功", "熵", "热传导", "热容", "卡诺循环", "内能", "焓"],
    }


# 全局配置实例
config = AppConfig()
